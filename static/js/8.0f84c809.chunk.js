(this["webpackJsonpent-vote-app"]=this["webpackJsonpent-vote-app"]||[]).push([[8],{115:function(e,t,a){"use strict";a.r(t);var n=a(14),s=a(15),i=a(17),c=a(16),l=a(0),h=a.n(l),r=(a(52),a(1)),o=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"isMyChat",value:function(){return!1}},{key:"render",value:function(){return Object(r.jsxs)("div",{className:"chat",children:[Object(r.jsx)("div",{className:"user-photo",children:Object(r.jsx)("div",{className:"user-name",children:this.props.name})}),Object(r.jsx)("p",{className:"chat-msg "+(this.props.isMine?"me ":"friend "),children:this.props.message})]})}}]),a}(h.a.Component),u=["\uac81\uba39\uc740","\uc2e0\ub09c","\ubb34\uc11c\uc6b4","\ud654\ub09c","\ub611\ub611\ud55c","\uadc0\uc5ec\uc6b4","\ud589\ubcf5\ud55c"],d=["\uc544\uae30\ub3fc\uc9c0","\uae40\uc885\ubb38","\uc2e0\ub300\uc7a5","\uae40\ud638\ub4e4","\uc720\ub290\ub2d8","\ud53c\uc624","\ucc9c\ud574\uba85","\uc7a5\uae30\ub450"],v=function(e){return Math.floor(Math.random()*e)},m=a(76),p=a.n(m),j=a(80),b=null,f=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={chatId:"",displayName:"",chatValue:"",chatlogs:[]},s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.initializeDisplayName().then((function(t){e.initializeChatServer(t)}))}},{key:"initializeChatServer",value:function(e){(b=j("ws://great-award-server.site:8080",{secure:!0,reconnectionDelayMax:1e4})).emit("login",{id:p()(e)}),this.listenChatEvent()}},{key:"initializeDisplayName",value:function(){var e=this;return new Promise((function(t,a){var n=u[v(u.length)],s=d[v(d.length)];console.log(n,s),e.setState({displayName:n+s},(function(){console.log(e.state.displayName),t(e.state.displayName)}))}))}},{key:"listenChatEvent",value:function(){var e=this;b.on("chat",(function(t){var a=e.state.chatlogs;a.push(p()(t)),e.setState({chatlogs:a})}))}},{key:"handleChatValueChange",value:function(e){var t=e.target.value;this.setState({chatValue:t})}},{key:"handleBoardcastChat",value:function(){b.emit("chat",{name:this.state.displayName,value:this.state.chatValue})}},{key:"render",value:function(){var e=this;return Object(r.jsx)("div",{className:"chat-background",children:Object(r.jsxs)("div",{className:"chat-box",children:[Object(r.jsx)("div",{className:"chat-logs",children:this.state.chatlogs.map((function(t,a){var n=t.name===e.state.displayName;return Object(r.jsx)(o,{isMine:n,name:t.name,message:t.value},a)}))}),Object(r.jsxs)("div",{className:"chat-form",children:[Object(r.jsx)("input",{className:"chat-text",type:"text",value:this.state.chatValue,onChange:this.handleChatValueChange.bind(this)}),Object(r.jsx)("button",{className:"chat-btn--snd",onClick:this.handleBoardcastChat.bind(this),children:Object(r.jsx)("i",{className:"fas fa-keyboard"})})]})]})})}}]),a}(h.a.Component);t.default=f},52:function(e,t,a){}}]);
//# sourceMappingURL=8.0f84c809.chunk.js.map