{"version":3,"sources":["VoteModal/warn-modal.jsx","Firebase/index.js","Chat/chat-block.jsx","Chat/chat-util.js","Chat/chat.jsx"],"names":["WarnModal","className","this","props","title","message","onClick","onClose","React","Component","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","firestore","ChatBlock","name","isMine","prefixSet","nameSet","getRandomInt","max","Math","floor","random","customStyles","content","top","left","right","bottom","marginRight","transform","width","height","padding","xss","require","Chat","state","chatId","displayName","chatValue","chatlogs","uid","modalIsOpen","a","messageRef","collection","query","orderBy","limit","initializeUid","initializeDisplayName","initializeChatServer","Promise","resolve","reject","onSnapshot","snapshot","forEach","doc","filteredData","data","Object","keys","key","push","setState","prefix","length","e","originLength","newLength","target","value","add","text","createdAt","Date","toISOString","preventDefault","map","chat","index","type","onChange","setChatValue","bind","onSubmit","isOpen","onRequestClose","closeModal","style","contentLabel","ariaHideApp"],"mappings":"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","file":"static/js/6.f398ffba.chunk.js","sourcesContent":["import React from \"react\";\nimport \"./style-vote-modal.scss\";\n\nclass WarnModal extends React.Component {\n  render() {\n    return (\n      <div className=\"modal-wrapper\">\n        <div className=\"modal-header\">\n          <h2> {this.props.title}</h2>\n        </div>\n        <div className=\"modal-body\">\n          {this.props.message}\n        </div>\n        <div className=\"modal-footer\">\n          <button onClick={this.props.onClose}>네</button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default WarnModal;\n","import firebase from \"firebase/app\";\nimport \"firebase/firestore\";\n\nfirebase.initializeApp({\n  apiKey: \"AIzaSyDtWWsADaITFWHm_r80wWsrVvSr_sDfrAo\",\n  authDomain: \"great-award.firebaseapp.com\",\n  databaseURL: \"https://great-award-default-rtdb.firebaseio.com\",\n  projectId: \"great-award\",\n  storageBucket: \"great-award.appspot.com\",\n  messagingSenderId: \"947294552913\",\n  appId: \"1:947294552913:web:f7cdaa4730cb4c4c5ac970\",\n});\n\nexport const getTimestamp = () => {\n  return firebase.firestore.fieldValue.getTimestamp();\n};\nexport const firestore = firebase.firestore();\n","import React from \"react\";\nimport \"./style-chat.scss\";\n\nclass ChatBlock extends React.Component {\n  isMyChat() {\n    return false;\n  }\n\n  render() {\n    return (\n      <div className=\"chat\">\n        <div className=\"user-photo\">\n          <div className=\"user-name\">{this.props.name}</div>\n        </div>\n        <p className={\"chat-msg \" + (this.props.isMine ? \"me \" : \"friend \")}>\n          {this.props.message}\n        </p>\n      </div>\n    );\n  }\n}\n\nexport default ChatBlock;\n","const prefixSet = [\n  \"겁먹은\",\n  \"신난\",\n  \"무서운\",\n  \"화난\",\n  \"똑똑한\",\n  \"귀여운\",\n  \"행복한\",\n  \"혼란한\",\n  \"절거운\",\n];\n\nconst nameSet = [\n  \"아기돼지\",\n  \"김종문\",\n  \"신대장\",\n  \"김호들\",\n  \"유느님\",\n  \"피오\",\n  \"천해명\",\n  \"장기두\",\n  \"왕희열\",\n  \"조마테오\",\n  \"오지구\",\n  \"장그래\",\n  \"조근만\",\n  \"앙헬헌트\",\n  \"김태임\",\n  \"칠복\",\n  \"이병원\",\n  \"이병실\",\n  \"최희망\",\n  \"이연구\",\n  \"사자회\",\n];\n\nconst getRandomInt = (max) => {\n  return Math.floor(Math.random() * max);\n};\n\nexport { prefixSet, nameSet, getRandomInt };\n","import React from \"react\";\nimport \"./style-chat.scss\";\n\nimport ChatBlock from \"./chat-block\";\nimport { prefixSet, nameSet, getRandomInt } from \"./chat-util\";\nimport { firestore } from \"../Firebase\";\nimport { uid } from \"uid\";\n\nimport Modal from \"react-modal\";\nimport WarnModal from \"../VoteModal/warn-modal\";\n\nconst customStyles = {\n  content: {\n    top: \"50%\",\n    left: \"50%\",\n    right: \"auto\",\n    bottom: \"auto\",\n    marginRight: \"-50%\",\n    transform: \"translate(-50%, -50%)\",\n    width: \"320px\",\n    height: \"180px\",\n    padding: \"0px\",\n  },\n};\n\nlet xss = require(\"xss\");\nclass Chat extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      chatId: \"\",\n      displayName: \"\",\n      chatValue: \"\",\n      chatlogs: [],\n      uid: \"\",\n      modalIsOpen: false,\n    };\n  }\n\n  async componentDidMount() {\n    this.firestore = firestore;\n    this.messageRef = this.firestore.collection(\"message\");\n    this.query = this.messageRef.orderBy(\"createdAt\").limit(200);\n\n    await this.initializeUid();\n    await this.initializeDisplayName();\n    await this.initializeChatServer();\n  }\n\n  initializeChatServer() {\n    return new Promise((resolve, reject) => {\n      this.query.onSnapshot((snapshot) => {\n        const chatlogs = [];\n        snapshot.forEach((doc) => {\n          let filteredData = {};\n          const data = doc.data();\n          Object.keys(data).forEach((key) => {\n            filteredData[key] = xss(data[key]);\n          });\n          chatlogs.push(filteredData);\n        });\n        this.setState({ chatlogs });\n      });\n      resolve();\n    });\n  }\n\n  initializeUid() {\n    return new Promise((resolve, reject) => {\n      this.setState({ uid: uid() }, () => {\n        resolve();\n      });\n    });\n  }\n\n  initializeDisplayName() {\n    return new Promise((resolve, reject) => {\n      const prefix = prefixSet[getRandomInt(prefixSet.length)];\n      const name = nameSet[getRandomInt(nameSet.length)];\n\n      this.setState({ displayName: prefix + name }, () => {\n        resolve(this.state.displayName);\n      });\n    });\n  }\n\n  setChatValue(e) {\n    const originLength = this.state.chatValue.length;\n    const newLength = e.target.value.length;\n    if (this.state.chatValue.length > 100 && originLength <= newLength) return;\n    const chatValue = xss(e.target.value);\n    this.setState({ chatValue });\n  }\n\n  async onSubmit() {\n    if (this.state.chatValue.length < 3) {\n      this.setState({ modalIsOpen: true });\n      return;\n    }\n    await this.messageRef.add({\n      text: this.state.chatValue,\n      name: this.state.displayName,\n      uid: this.state.uid,\n      createdAt: new Date().toISOString(),\n    });\n\n    this.setState({ chatValue: \"\" });\n  }\n\n  openModal(e) {\n    e.preventDefault();\n    this.setState({ modalIsOpen: true });\n  }\n\n  closeModal() {\n    this.setState({ modalIsOpen: false });\n  }\n\n  render() {\n    return (\n      <div className=\"chat-background\">\n        <div className=\"chat-box\">\n          <div className=\"chat-logs\">\n            {this.state.chatlogs.map((chat, index) => {\n              const isMine = chat.name === this.state.displayName;\n\n              return (\n                <ChatBlock\n                  key={index}\n                  isMine={isMine}\n                  name={chat.name}\n                  message={chat.text}\n                />\n              );\n            })}\n          </div>\n          <div className=\"chat-form\">\n            <input\n              className=\"chat-text\"\n              type=\"text\"\n              value={this.state.chatValue}\n              onChange={this.setChatValue.bind(this)}\n            ></input>\n            <button\n              className=\"chat-btn--snd\"\n              onClick={this.onSubmit.bind(this)}\n            >\n              <i className=\"fas fa-keyboard\"></i>\n            </button>\n          </div>\n        </div>\n        <Modal\n          isOpen={this.state.modalIsOpen}\n          onRequestClose={this.closeModal.bind(this)}\n          style={customStyles}\n          contentLabel=\"Warn Modal\"\n          ariaHideApp={false}\n        >\n            <WarnModal onClose={this.closeModal.bind(this)}\n            title={\"대탈출 실시간 채팅방\"}\n            message={\"3글자 이상 작성해주세요.\"} />\n        </Modal>\n      </div>\n    );\n  }\n}\n\nexport default Chat;\n"],"sourceRoot":""}