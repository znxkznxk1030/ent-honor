(this["webpackJsonpent-vote-app"]=this["webpackJsonpent-vote-app"]||[]).push([[8],{43:function(t,e,a){},69:function(t,e,a){"use strict";a.r(e);var s=a(54),n=a.n(s),i=a(56),r=a(14),c=a(15),u=a(17),o=a(16),h=a(0),l=a.n(h),d=(a(43),a(1)),p=function(t){Object(u.a)(a,t);var e=Object(o.a)(a);function a(){return Object(r.a)(this,a),e.apply(this,arguments)}return Object(c.a)(a,[{key:"isMyChat",value:function(){return!1}},{key:"render",value:function(){return Object(d.jsxs)("div",{className:"chat",children:[Object(d.jsx)("div",{className:"user-photo",children:Object(d.jsx)("div",{className:"user-name",children:this.props.name})}),Object(d.jsx)("p",{className:"chat-msg "+(this.props.isMine?"me ":"friend "),children:this.props.message})]})}}]),a}(l.a.Component),f=["\uac81\uba39\uc740","\uc2e0\ub09c","\ubb34\uc11c\uc6b4","\ud654\ub09c","\ub611\ub611\ud55c","\uadc0\uc5ec\uc6b4","\ud589\ubcf5\ud55c","\ud63c\ub780\ud55c","\uc808\uac70\uc6b4"],m=["\uc544\uae30\ub3fc\uc9c0","\uae40\uc885\ubb38","\uc2e0\ub300\uc7a5","\uae40\ud638\ub4e4","\uc720\ub290\ub2d8","\ud53c\uc624","\ucc9c\ud574\uba85","\uc7a5\uae30\ub450","\uc655\ud76c\uc5f4","\uc870\ub9c8\ud14c\uc624","\uc624\uc9c0\uad6c","\uc7a5\uadf8\ub798","\uc870\uadfc\ub9cc","\uc559\ud5ec\ud5cc\ud2b8","\uae40\ud0dc\uc784","\uce60\ubcf5","\uc774\ubcd1\uc6d0","\uc774\ubcd1\uc2e4","\ucd5c\ud76c\ub9dd","\uc774\uc5f0\uad6c","\uc0ac\uc790\ud68c"],b=function(t){return Math.floor(Math.random()*t)},v=a(57);a(65);v.a.initializeApp({apiKey:"AIzaSyDtWWsADaITFWHm_r80wWsrVvSr_sDfrAo",authDomain:"great-award.firebaseapp.com",databaseURL:"https://great-award-default-rtdb.firebaseio.com",projectId:"great-award",storageBucket:"great-award.appspot.com",messagingSenderId:"947294552913",appId:"1:947294552913:web:f7cdaa4730cb4c4c5ac970"});var j=v.a.firestore(),y=a(60),O=a(61),g=function(t){Object(u.a)(a,t);var e=Object(o.a)(a);function a(t){var s;return Object(r.a)(this,a),(s=e.call(this,t)).state={chatId:"",displayName:"",chatValue:"",chatlogs:[],uid:""},s}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var t=Object(i.a)(n.a.mark((function t(){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.firestore=j,this.messageRef=this.firestore.collection("message"),this.query=this.messageRef.orderBy("createdAt").limit(200),t.next=5,this.initializeUid();case 5:return t.next=7,this.initializeDisplayName();case 7:return t.next=9,this.initializeChatServer();case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"initializeChatServer",value:function(){var t=this;return new Promise((function(e,a){t.query.onSnapshot((function(e){var a=[];e.forEach((function(t){var e={},s=t.data();Object.keys(s).forEach((function(t){e[t]=O(s[t])})),a.push(e)})),t.setState({chatlogs:a})})),e()}))}},{key:"initializeUid",value:function(){var t=this;return new Promise((function(e,a){t.setState({uid:Object(y.a)()},(function(){e()}))}))}},{key:"initializeDisplayName",value:function(){var t=this;return new Promise((function(e,a){var s=f[b(f.length)],n=m[b(m.length)];t.setState({displayName:s+n},(function(){e(t.state.displayName)}))}))}},{key:"setChatValue",value:function(t){var e=O(t.target.value);this.setState({chatValue:e})}},{key:"onSubmit",value:function(){var t=Object(i.a)(n.a.mark((function t(){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.messageRef.add({text:this.state.chatValue,name:this.state.displayName,uid:this.state.uid,createdAt:(new Date).toISOString()});case 2:this.setState({chatValue:""});case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return Object(d.jsx)("div",{className:"chat-background",children:Object(d.jsxs)("div",{className:"chat-box",children:[Object(d.jsx)("div",{className:"chat-logs",children:this.state.chatlogs.map((function(e,a){var s=e.name===t.state.displayName;return Object(d.jsx)(p,{isMine:s,name:e.name,message:e.text},a)}))}),Object(d.jsxs)("div",{className:"chat-form",children:[Object(d.jsx)("input",{className:"chat-text",type:"text",value:this.state.chatValue,onChange:this.setChatValue.bind(this)}),Object(d.jsx)("button",{className:"chat-btn--snd",onClick:this.onSubmit.bind(this),children:Object(d.jsx)("i",{className:"fas fa-keyboard"})})]})]})})}}]),a}(l.a.Component);e.default=g}}]);
//# sourceMappingURL=8.bbc1918e.chunk.js.map